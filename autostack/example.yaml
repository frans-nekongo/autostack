project:
  name: "E-commerce Platform"
  author: "Development Team"
  description: "Scalable e-commerce platform with microservices architecture"
  version: "2.1.0"
  metadata:
    created_date: "2024-01-15"
    last_modified: "2024-03-10"
    tags: ["e-commerce", "microservices", "cloud-native"]
    environment: "production"

technologies:
  postgresql:
    type: "database"
    version: "15.2"
    provider: "AWS RDS"
    configuration:
      port: 5432
      ssl_enabled: true
      backup_retention: 30
  
  redis:
    type: "cache"
    version: "7.0"
    provider: "AWS ElastiCache"
    configuration:
      port: 6379
      cluster_mode: true
  
  nodejs:
    type: "runtime"
    version: "18.16.0"
    framework: "Express"
  
  react:
    type: "frontend"
    version: "18.2.0"
    build_tool: "Vite"

environments:
  development:
    scaling:
      default_replicas: 1
      auto_scaling: false
    resources:
      default_cpu: "0.5"
      default_memory: "512Mi"
  
  production:
    scaling:
      default_replicas: 3
      auto_scaling: true
      min_replicas: 2
      max_replicas: 10
    resources:
      default_cpu: "1"
      default_memory: "1Gi"

components:
  - id: "user-db"
    type: "database"
    name: "User Database"
    technology: "postgresql"
    properties:
      description: "Stores user profiles, authentication data"
      schema_version: "1.2"
      data_retention: "7 years"
    deployment:
      environment_specific: true
      high_availability: true
      backup_strategy: "daily"
    security:
      encryption_at_rest: true
      access_control: "rbac"
      network_isolation: true
    
  - id: "product-db"
    type: "database"
    name: "Product Catalog Database"
    technology: "postgresql"
    properties:
      description: "Product information, inventory, pricing"
      schema_version: "2.1"
    deployment:
      read_replicas: 2
      backup_strategy: "continuous"

  # Cache Layer
  - id: "session-cache"
    type: "cache"
    name: "Session Cache"
    technology: "redis"
    properties:
      description: "User session storage and caching"
      ttl: "24h"
      persistence: false
    deployment:
      cluster_mode: true

  # APIs and Services
  - id: "auth-service"
    type: "microservice"
    name: "Authentication Service"
    technology: "nodejs"
    properties:
      description: "Handles user authentication and authorization"
      port: 3001
      health_check_path: "/health"
      metrics_path: "/metrics"
    deployment:
      scaling:
        min_replicas: 2
        max_replicas: 5
        target_cpu: 70
      resources:
        cpu: "500m"
        memory: "512Mi"
    security:
      jwt_enabled: true
      rate_limiting: true
      cors_enabled: true
    monitoring:
      logging_level: "info"
      tracing_enabled: true

  - id: "product-service"
    type: "microservice"
    name: "Product Service"
    technology: "nodejs"
    properties:
      description: "Product catalog and inventory management"
      port: 3002
    dependencies:
      - component_id: "product-db"
        type: "database_query"
        critical: true
      - component_id: "session-cache"
        type: "cache_access"
        critical: false

  - id: "api-gateway"
    type: "gateway"
    name: "API Gateway"
    technology: "nginx"
    properties:
      description: "Central API gateway for routing and load balancing"
      port: 80
      ssl_termination: true
    routing:
      - path: "/auth/*"
        target: "auth-service"
        timeout: "30s"
      - path: "/products/*"
        target: "product-service"
        timeout: "10s"

  # Frontend
  - id: "web-app"
    type: "ui"
    name: "Customer Web Application"
    technology: "react"
    properties:
      description: "Customer-facing web interface"
      build_output: "static"
    deployment:
      cdn_enabled: true
      gzip_compression: true

  # External Services
  - id: "payment-gateway"
    type: "external_service"
    name: "Stripe Payment Gateway"
    properties:
      description: "External payment processing"
      vendor: "Stripe"
      api_version: "2023-10-16"
      sla: "99.95%"
    security:
      webhook_verification: true
      api_key_rotation: "monthly"

  # Infrastructure
  - id: "load-balancer"
    type: "load_balancer"
    name: "Application Load Balancer"
    technology: "aws-alb"
    properties:
      algorithm: "round_robin"
      health_check_interval: "30s"
      stickiness: false

connections:
  - id: "web-to-gateway"
    source: "web-app"
    target: "api-gateway"
    type: "api_call"
    properties:
      protocol: "https"
      method: ["GET", "POST", "PUT", "DELETE"]
      authentication_required: false
      rate_limit: "1000/min"
      timeout: "30s"

  - id: "gateway-to-auth"
    source: "api-gateway"
    target: "auth-service"
    type: "api_call"
    properties:
      protocol: "http"
      load_balancing: true
      circuit_breaker: true
      retry_policy:
        max_attempts: 3
        backoff_strategy: "exponential"

  - id: "auth-to-cache"
    source: "auth-service"
    target: "session-cache"
    type: "cache_access"
    properties:
      operation_types: ["GET", "SET", "DELETE"]
      connection_pool_size: 10
      timeout: "5s"

  - id: "auth-to-db"
    source: "auth-service"
    target: "user-db"
    type: "database_query"
    properties:
      connection_pool_size: 20
      query_timeout: "30s"
      read_write_split: false
      migrations_enabled: true

  - id: "product-service-to-db"
    source: "product-service"
    target: "product-db"
    type: "database_query"
    properties:
      read_write_split: true
      read_preference: "replica"

  - id: "payment-integration"
    source: "api-gateway"
    target: "payment-gateway"
    type: "api_call"
    properties:
      protocol: "https"
      webhook_endpoint: "/webhooks/stripe"
      idempotency_required: true

# Define deployment pipelines and environments
deployment:
  strategy: "blue_green"
  environments: ["development", "staging", "production"]
  rollback_enabled: true
  
  health_checks:
    startup_probe:
      initial_delay: "30s"
      period: "10s"
    liveness_probe:
      period: "30s"
      failure_threshold: 3
    readiness_probe:
      period: "10s"
      success_threshold: 1

# Monitoring and observability
observability:
  logging:
    centralized: true
    retention: "90d"
    log_level: "info"
  
  metrics:
    collection_interval: "15s"
    retention: "1y"
    custom_metrics: true
  
  tracing:
    enabled: true
    sample_rate: 0.1
    distributed: true

# Security configurations
security:
  network_policies:
    default_deny: true
    egress_allowed: ["payment-gateway"]
  
  secrets_management:
    provider: "aws_secrets_manager"
    rotation_enabled: true
  
  compliance:
    standards: ["PCI-DSS", "GDPR"]
    audit_logging: true